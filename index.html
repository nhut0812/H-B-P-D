<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ch√∫c m·ª´ng sinh nh·∫≠t Tuy·∫øt Ng·ªçc üéÇ</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  height: 100vh;
  background: linear-gradient(180deg, #ffeef7, #ffd8eb, #ffc6e3);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Poppins', sans-serif;
  overflow: hidden;
}

/* ‚ú® Sao r∆°i */
#stars {
  position: fixed;
  inset: 0;
  overflow: hidden;
  z-index: 0;
}
.star {
  position: absolute;
  width: 3px;
  height: 3px;
  background: #fff9c4;
  border-radius: 50%;
  animation: fall linear infinite;
}
@keyframes fall {
  from { transform: translateY(-10vh); opacity: 1; }
  to { transform: translateY(110vh); opacity: 0; }
}

/* üíå Thi·ªáp */
.card {
  z-index: 2;
  background: rgba(255,255,255,0.4);
  border-radius: 20px;
  padding: 5vw;
  width: min(90vw,800px);
  text-align: center;
  box-shadow: 0 0 30px rgba(255,150,200,0.3);
  backdrop-filter: blur(12px);
}
h1 {
  font-family: 'Great Vibes', cursive;
  color: #ff4fa1;
  font-size: clamp(32px,6vw,56px);
  margin: 0;
}
.btn {
  background: linear-gradient(120deg,#ff9ace,#ff64b3);
  border: none;
  border-radius: 10px;
  padding: clamp(10px,2vw,14px) clamp(20px,4vw,28px);
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  margin-top: 20px;
  font-size: clamp(16px,3vw,20px);
  box-shadow: 0 4px 12px rgba(255,100,179,0.3);
}
.btn:hover { transform: scale(1.08); }

/* üéÇ B√°nh kem */
.cake-wrap {
  position: relative;
  width: min(80vw,400px);
  aspect-ratio: 1/1;
  margin: 40px auto 0;
}
.cake {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: #ffd5e5;
  border: clamp(6px,2vw,12px) solid #fff;
  box-shadow: 0 0 15px rgba(255,180,210,0.5) inset;
}
.cake::before {
  content: "";
  position: absolute;
  inset: clamp(4px,1vw,8px);
  border-radius: 50%;
  border: clamp(4px,1vw,8px) solid #ff9cc7;
}
.cake::after {
  content: "";
  position: absolute;
  bottom: -16px;
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  height: 20px;
  border-radius: 50%;
  background: radial-gradient(ellipse at center, rgba(255,150,200,0.4), transparent 70%);
  filter: blur(4px);
}

/* üïØÔ∏è N·∫øn */
.candle {
  position: absolute;
  width: clamp(6px,1.8vw,10px);
  height: clamp(25px,5vw,40px);
  background: #8fd7ff;
  border-radius: 5px;
  left: 50%;
  top: 50%;
  transform-origin: 50% 100%;
}
.candle::before {
  content: "";
  position: absolute;
  top: -15px; left: 50%;
  transform: translateX(-50%);
  width: clamp(6px,1.6vw,10px);
  height: clamp(10px,3vw,15px);
  border-radius: 50%;
  background: radial-gradient(circle at 50% 30%, #fffad0 0%, #ffb200 50%, transparent 70%);
  filter: drop-shadow(0 0 8px #ffb200);
  animation: flicker 0.1s infinite alternate;
}
@keyframes flicker {
  from { transform: translateX(-50%) scale(1); }
  to { transform: translateX(-50%) scale(1.2) translateY(-1px); }
}
.candle.out::before { opacity: 0; }

.smoke {
  position: absolute;
  width: 4px;
  height: 25px;
  background: linear-gradient(to top, rgba(200,200,200,.4), transparent);
  left: 50%;
  top: -15px;
  transform: translateX(-50%);
  border-radius: 50%;
  animation: smokeRise 1.5s ease-out forwards;
}
@keyframes smokeRise {
  from { opacity: 1; transform: translate(-50%, 0); }
  to { opacity: 0; transform: translate(-50%, -40px); }
}

/* ‚ú® Ch·ªØ 2 h√†ng gi·ªØa b√°nh */
.name {
  position: absolute;
  width: 100%;
  top: 50%;
  transform: translateY(-50%);
  text-align: center;
  font-family: 'Great Vibes', cursive;
  font-size: clamp(22px,5vw,34px);
  color: #fff;
  text-shadow: 0 0 10px #ffc0e4;
  line-height: 1.3;
}
.name span:last-child {
  display: block;
  color: #ff3f9e;
  font-size: clamp(26px,6vw,38px);
  margin-top: 4px;
}
.typing {
  display: inline-block;
  border-right: 3px solid rgba(255,79,161,.7);
  animation: blink .7s steps(1) infinite;
}
@keyframes blink { 50% { border-color: transparent; } }

/* üéÅ Popup qu√† (fix iPhone layout) */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.4);
  backdrop-filter: blur(10px);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 10;
}
.modal.show { display: flex; }

.pop {
  background: rgba(255,255,255,.3);
  border: 3px solid rgba(255,150,200,.4);
  border-radius: 16px;
  padding: 6vw 5vw;
  width: 90vw;
  max-height: 90dvh; /* tƒÉng chi·ªÅu cao th√™m */
  text-align: center;
  box-shadow: 0 0 40px rgba(255,150,200,.3);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.pop h3 {
  color: #ff3f9e;
  font-size: clamp(22px,5vw,30px);
  margin-bottom: 10px;
}
.question {
  font-size: clamp(16px,4vw,20px);
  color: #661a3a;
  margin-bottom: 20px;
}

.arena {
  flex-grow: 1;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
}
.btn-yes, .btn-no {
  padding: clamp(10px,2vw,14px) clamp(18px,4vw,22px);
  border: none;
  border-radius: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: .2s;
  position: relative;
  z-index: 5;
  font-size: clamp(14px,3vw,18px);
}
.btn-yes {
  background: linear-gradient(120deg,#a6ffb5,#4dff7a);
  color:#053e18;
  z-index: 6;
}
.btn-no {
  background: linear-gradient(120deg,#ffd36e,#ffb638);
  color:#3f2500;
}
.btn-yes:hover { transform: scale(1.1); }
.anchored { position: absolute !important; transform: translate(-50%,-50%) !important; }

/* üéä Confetti */
.confetti {
  position: fixed; inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 20;
}
.confetti i {
  position: absolute;
  width: 8px; height: 14px;
  background: hsl(var(--h),90%,60%);
  top: -10px; left: var(--x);
  transform: rotate(var(--r));
  animation: fallConfetti var(--d) linear forwards;
  border-radius: 2px;
}
@keyframes fallConfetti {
  to { transform: translateY(110vh) rotate(1turn); }
}
.wish {
  margin-top: 20px;
  font-size: clamp(20px,5vw,26px);
  font-family: 'Great Vibes', cursive;
  color: #ff3f9e;
  text-shadow: 0 0 10px #ffc0e4;
}
</style>
</head>
<body>

<div id="stars"></div>

<div class="card" id="card">
  <h1>Thi·ªáp sinh nh·∫≠t üíå</h1>
  <p>Nh·∫•n ‚ÄúM·ªü thi·ªáp‚Äù ƒë·ªÉ xem b·∫•t ng·ªù d√†nh cho Tuy·∫øt Ng·ªçc üå∏</p>
  <button class="btn" id="openCard">M·ªü thi·ªáp</button>

  <div class="inside" id="inside" style="display:none;">
    <div class="cake-wrap" id="cakeWrap">
      <div class="cake"></div>
      <div class="name" id="name">
        <span id="line1"></span>
        <span id="line2"></span>
      </div>
    </div>
    <button class="btn" id="blow">üéÇ Th·ªïi n·∫øn</button>
    <div id="final" style="display:none;">
      <div class="confetti" id="confetti"></div>
      <p class="wish">Ch√∫c Tuy·∫øt Ng·ªçc lu√¥n xinh ƒë·∫πp, h·∫°nh ph√∫c v√† r·∫°ng r·ª° nh∆∞ h√¥m nay üíñ</p>
    </div>
  </div>
</div>

<div class="modal" id="modal">
  <div class="pop">
    <h3>üéÅ Qu√† b√≠ m·∫≠t cho Tuy·∫øt Ng·ªçc üéÅ</h3>
    <p class="question">C√≥ mu·ªën nh·∫≠n qu√† kh√¥ng?</p>
    <div class="arena" id="arena">
      <button class="btn-yes" id="yesBtn">C√≥ ü•∞</button>
      <button class="btn-no" id="noBtn">Kh√¥ng üòÜ</button>
    </div>
  </div>
</div>

<script>
// ‚ú® Sao r∆°i
const stars=document.getElementById("stars");
for(let i=0;i<70;i++){
  const s=document.createElement("div");
  s.classList.add("star");
  s.style.left=Math.random()*100+"vw";
  s.style.animationDuration=3+Math.random()*5+"s";
  s.style.animationDelay=Math.random()*5+"s";
  stars.appendChild(s);
}

// ‚ú® G√µ ch·ªØ t·ª´ng d√≤ng
function typeText(text, element, callback){
  let i=0;
  const span=document.createElement('span');
  span.className='typing';
  element.appendChild(span);
  const typer=setInterval(()=>{
    span.textContent=text.slice(0,++i);
    if(i===text.length){
      clearInterval(typer);
      span.classList.remove('typing');
      if(callback) setTimeout(callback,500);
    }
  },120);
}

// üéÇ M·ªü thi·ªáp
const openCard=document.getElementById('openCard');
const inside=document.getElementById('inside');
const cakeWrap=document.getElementById('cakeWrap');
const blow=document.getElementById('blow');
const modal=document.getElementById('modal');
const yesBtn=document.getElementById('yesBtn');
const noBtn=document.getElementById('noBtn');
const arena=document.getElementById('arena');
const final=document.getElementById('final');
const confettiBox=document.getElementById('confetti');
const line1=document.getElementById('line1');
const line2=document.getElementById('line2');

openCard.onclick=()=>{
  inside.style.display='block';
  openCard.style.display='none';
  typeText("Ch√∫c m·ª´ng sinh nh·∫≠t", line1, ()=>typeText("Tuy·∫øt Ng·ªçc", line2));
  createCandles();
};

// üïØÔ∏è N·∫øn
function createCandles(){
  for(let i=0;i<22;i++){
    const c=document.createElement('div');
    c.className='candle';
    const angle=(i/22)*360;
    const radius=cakeWrap.offsetWidth*0.37;
    c.style.transform=`translate(-50%,-100%) rotate(${angle}deg) translate(${radius}px) rotate(${-angle}deg)`;
    cakeWrap.appendChild(c);
  }
}

// üí® Th·ªïi n·∫øn
blow.onclick=async()=>{
  const candles=document.querySelectorAll('.candle');
  blow.disabled=true;
  for(const c of candles){
    await new Promise(r=>setTimeout(r,100));
    c.classList.add('out');
    const smoke=document.createElement('div');
    smoke.className='smoke';
    c.appendChild(smoke);
  }
  setTimeout(()=>modal.classList.add('show'),1000);
};

// üéÅ Popup
let firstClick=true;
yesBtn.onclick=e=>{
  e.preventDefault();
  if(firstClick){anchorButtons();firstClick=false;}
  moveYes();growNo();
};
function anchorButtons(){
  const aRect=arena.getBoundingClientRect();
  const nRect=noBtn.getBoundingClientRect();
  const yRect=yesBtn.getBoundingClientRect();
  noBtn.classList.add('anchored');
  noBtn.style.left=nRect.left - aRect.left + nRect.width/2+'px';
  noBtn.style.top=nRect.top - aRect.top + nRect.height/2+'px';
  yesBtn.classList.add('anchored');
  yesBtn.style.left=yRect.left - aRect.left + yRect.width/2+'px';
  yesBtn.style.top=yRect.top - aRect.top + yRect.height/2+'px';
}
function moveYes(){
  const rect=arena.getBoundingClientRect();
  const x=Math.random()*(rect.width-100)+50;
  const y=Math.random()*(rect.height-80)+40;
  yesBtn.style.left=x+'px';
  yesBtn.style.top=y+'px';
}
function growNo(){
  const fs=parseFloat(getComputedStyle(noBtn).fontSize);
  const py=parseFloat(getComputedStyle(noBtn).paddingTop);
  const px=parseFloat(getComputedStyle(noBtn).paddingLeft);
  noBtn.style.fontSize=(fs+2)+'px';
  noBtn.style.padding=(py+2)+'px '+(px+3)+'px';
  noBtn.style.boxShadow='0 0 20px #ffd36e';
}
noBtn.onclick=()=>{
  modal.classList.remove('show');
  final.style.display='block';
  shootConfetti();
};

// üéä Confetti
function shootConfetti(){
  confettiBox.innerHTML='';
  for(let i=0;i<120;i++){
    const p=document.createElement('i');
    p.style.setProperty('--h',Math.floor(Math.random()*360));
    p.style.setProperty('--x',Math.random()*100+'vw');
    p.style.setProperty('--r',Math.random()*360+'deg');
    p.style.setProperty('--d',(2+Math.random()*3)+'s');
    confettiBox.appendChild(p);
  }
  setTimeout(()=>confettiBox.innerHTML='',6000);
}
</script>
</body>
</html>
